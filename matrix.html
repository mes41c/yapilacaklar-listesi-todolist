<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Eisenhower Matrisi - Komuta Merkezi</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, collection, query, orderBy, onSnapshot, 
            doc, updateDoc, addDoc, deleteDoc, serverTimestamp 
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- FIREBASE AYARLARI (index.html ile aynƒ±) ---
        const firebaseConfig = {
          apiKey: "AIzaSyCCML1QJZWGQbIHFtr7iohPzT11E5RBONo",
          authDomain: "yapilacaklarlistesi-aa004.firebaseapp.com",
          projectId: "yapilacaklarlistesi-aa004",
          storageBucket: "yapilacaklarlistesi-aa004.appspot.com",
          messagingSenderId: "582402705694",
          appId: "1:582402705694:web:3eb74e683ada3e8d56e10f"
        };
        
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const appId = 'todo-app-rebuild-final-v2'; // Proje ID'si

        let userId = null;
        let localTasks = [];
        const WIP_LIMIT = 3;
        
        // Kategorileri LocalStorage'da tutuyoruz (Basitlik i√ßin)
        let defaultCategories = [
            { id: 'genel', name: 'Genel', color: 'bg-gray-600' },
            { id: 'kodlama', name: 'Kodlama', color: 'bg-blue-600' },
            { id: 'ders', name: 'Ders', color: 'bg-purple-600' },
            { id: 'kisisel', name: 'Ki≈üisel', color: 'bg-green-600' }
        ];
        let categories = JSON.parse(localStorage.getItem('matrixCategories')) || defaultCategories;
        let currentFilter = 'all';
        let isZenMode = false;

        // --- AUTH & LISTENER ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                userId = user.uid;
                document.getElementById('authLoading').classList.add('hidden');
                document.getElementById('appContent').classList.remove('hidden');
                listenToTasks();
                renderFilters();
            } else {
                // Giri≈ü yapƒ±lmamƒ±≈üsa ana sayfaya y√∂nlendir veya uyar
                window.location.href = 'index.html';
            }
        });

        function listenToTasks() {
            const q = query(collection(db, "artifacts", appId, "users", userId, "todos"), orderBy("createdAt", "desc"));
            onSnapshot(q, (snapshot) => {
                localTasks = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                renderAll();
            });
        }

        // --- UI RENDER ---
        window.renderAll = function() {
            // Temizle
            document.getElementById('backlog-list').innerHTML = '';
            ['q1', 'q2', 'q3', 'q4'].forEach(q => document.getElementById(`list-${q}`).innerHTML = '');

            // Filtrele
            const filteredTasks = localTasks.filter(t => {
                // Eƒüer g√∂rev silinmi≈üse veya tamamlanmƒ±≈üsa (opsiyonel) g√∂sterme
                // ≈ûimdilik tamamlananlarƒ± da g√∂steriyoruz ama silik olabilir
                if (currentFilter === 'all') return true;
                return (t.tag || 'genel') === currentFilter;
            });

            // Daƒüƒ±t
            filteredTasks.forEach(task => {
                // Eƒüer task'in matrixQuadrant deƒüeri yoksa 'null' kabul et (Havuz)
                const quadrant = task.matrixQuadrant || 'null';
                const el = createTaskElement(task);
                
                if (quadrant === 'null') {
                    document.getElementById('backlog-list').appendChild(el);
                } else {
                    const targetList = document.getElementById(`list-${quadrant}`);
                    if (targetList) targetList.appendChild(el);
                }
            });

            updateCounts();
        }

        function createTaskElement(task) {
            const div = document.createElement('div');
            const taskTag = task.tag || 'genel';
            const category = categories.find(c => c.id === taskTag) || { name: taskTag, color: 'bg-gray-600' };

            div.className = `bg-slate-700 p-3 rounded-lg shadow-sm border border-slate-600 cursor-grab active:cursor-grabbing hover:bg-slate-600 hover:border-slate-500 transition-all flex flex-col gap-1 group relative animate-[fadeIn_0.3s_ease-in-out] ${task.completed ? 'opacity-50' : ''}`;
            div.draggable = true;
            div.id = task.id;
            
            // S√ºr√ºkle Bƒ±rak Eventleri
            div.addEventListener('dragstart', (e) => {
                e.dataTransfer.setData("text/plain", task.id);
                e.target.classList.add('dragging');
            });
            div.addEventListener('dragend', (e) => {
                e.target.classList.remove('dragging');
            });
            
            div.innerHTML = `
                <div class="flex justify-between items-start">
                    <span class="text-sm text-slate-200 leading-tight ${task.completed ? 'line-through' : ''}">${task.text}</span>
                    <button onclick="deleteTask('${task.id}')" class="text-slate-500 hover:text-red-400 opacity-0 group-hover:opacity-100 transition ml-2">‚úï</button>
                </div>
                <div class="flex gap-2 mt-1 items-center">
                    <span class="text-[10px] ${category.color} text-white px-1.5 rounded bg-opacity-80 uppercase tracking-wide shadow-sm">${category.name}</span>
                    ${task.dueDate ? `<span class="text-[10px] text-slate-400"><i class="fa-regular fa-clock"></i> ${task.dueDate}</span>` : ''}
                </div>
            `;
            return div;
        }

        // --- ACTIONS (GLOBAL) ---
        window.addNewTaskDirectly = async function(quadrant) {
            if (quadrant === 'q1') {
                const currentQ1 = localTasks.filter(t => t.matrixQuadrant === 'q1').length;
                if (currentQ1 >= WIP_LIMIT) { showToast(`‚ö†Ô∏è Q1 Limiti Dolu!`); return; }
            }
            const text = prompt("G√∂rev adƒ±:");
            if (!text) return;

            const newTag = currentFilter !== 'all' ? currentFilter : 'genel';
            
            try {
                await addDoc(collection(db, "artifacts", appId, "users", userId, "todos"), {
                    text: text,
                    completed: false,
                    createdAt: serverTimestamp(),
                    matrixQuadrant: quadrant,
                    tag: newTag,
                    listId: null // Matrix g√∂revleri varsayƒ±lan olarak listesiz olabilir veya bir "Matrix" listesi olu≈üturulabilir
                });
            } catch (e) {
                showToast("Hata: " + e.message);
            }
        }

        window.handleQuickAdd = async function(e) {
            if(e.key === 'Enter') {
                const val = e.target.value.trim();
                if(val) {
                    const newTag = currentFilter !== 'all' ? currentFilter : 'genel';
                    try {
                        await addDoc(collection(db, "artifacts", appId, "users", userId, "todos"), {
                            text: val,
                            completed: false,
                            createdAt: serverTimestamp(),
                            matrixQuadrant: null, // Havuza gider
                            tag: newTag
                        });
                        e.target.value = '';
                    } catch (err) { showToast("Hata: " + err.message); }
                }
            }
        }

        window.deleteTask = async function(id) {
            if(!confirm('Silinsin mi?')) return;
            try {
                await deleteDoc(doc(db, "artifacts", appId, "users", userId, "todos", id));
            } catch(e) { showToast("Silinemedi: " + e.message); }
        }

        window.cleanQ4 = async function() {
            const tasksToDelete = localTasks.filter(t => t.matrixQuadrant === 'q4');
            if(tasksToDelete.length === 0) return;
            if(!confirm(`${tasksToDelete.length} adet √∂nemsiz g√∂revi silmek istediƒüine emin misin?`)) return;
            
            tasksToDelete.forEach(async (t) => {
                await deleteDoc(doc(db, "artifacts", appId, "users", userId, "todos", t.id));
            });
            showToast("üßπ Q4 temizlendi.");
        }

        // --- DRAG & DROP (FIRESTORE UPDATE) ---
        window.allowDrop = function(e) { e.preventDefault(); }
        
        window.drop = async function(e, targetQuadrant) {
            e.preventDefault();
            const taskId = e.dataTransfer.getData("text/plain");
            if (!taskId) return;
            
            const realTarget = targetQuadrant === 'null' ? null : targetQuadrant;

            // WIP Limit Kontrol√º (Local State √ºzerinden hƒ±zlƒ± kontrol)
            if (realTarget === 'q1') {
                const task = localTasks.find(t => t.id === taskId);
                const currentQ1Count = localTasks.filter(t => t.matrixQuadrant === 'q1').length;
                if (task && task.matrixQuadrant !== 'q1' && currentQ1Count >= WIP_LIMIT) {
                    showToast(`‚ö†Ô∏è Dur Yolcu! Q1 Limiti (${WIP_LIMIT}) Doldu.`);
                    return;
                }
            }

            try {
                const taskRef = doc(db, "artifacts", appId, "users", userId, "todos", taskId);
                await updateDoc(taskRef, { matrixQuadrant: realTarget });
            } catch (err) {
                showToast("Ta≈üƒ±ma ba≈üarƒ±sƒ±z: " + err.message);
            }
        }

        // --- CATEGORY & FILTERS ---
        window.renderFilters = function() {
            const container = document.getElementById('category-filters');
            container.innerHTML = '';
            
            // T√ºm√º Butonu
            const allBtn = document.createElement('button');
            allBtn.className = `filter-btn px-3 py-1 text-xs rounded-md transition whitespace-nowrap ${currentFilter === 'all' ? 'bg-slate-600 text-white' : 'text-slate-400 hover:bg-slate-700'}`;
            allBtn.textContent = 'T√ºm√º';
            allBtn.onclick = () => { currentFilter = 'all'; renderFilters(); renderAll(); };
            container.appendChild(allBtn);

            categories.forEach(cat => {
                const btn = document.createElement('button');
                const isActive = currentFilter === cat.id;
                const dot = `<span class="inline-block w-2 h-2 rounded-full mr-1.5 ${cat.color}"></span>`;
                btn.className = `filter-btn px-3 py-1 text-xs rounded-md transition flex items-center whitespace-nowrap ${isActive ? 'bg-slate-600 text-white' : 'text-slate-400 hover:bg-slate-700'}`;
                btn.innerHTML = `${dot}${cat.name}`;
                btn.onclick = () => { currentFilter = cat.id; renderFilters(); renderAll(); };
                container.appendChild(btn);
            });

            const addBtn = document.createElement('button');
            addBtn.className = "px-2 py-1 text-xs text-slate-500 hover:text-slate-200 hover:bg-slate-700 rounded-md transition";
            addBtn.innerHTML = '<i class="fa-solid fa-plus"></i>';
            addBtn.onclick = addNewCategory;
            container.appendChild(addBtn);
        }

        window.addNewCategory = function() {
            const name = prompt("Kategori adƒ±:");
            if (!name || name.trim() === "") return;
            const id = name.toLowerCase().replace(/ /g, '-').replace(/[^\w-]+/g, '');
            const colors = ['bg-pink-600', 'bg-indigo-600', 'bg-orange-600', 'bg-teal-600', 'bg-cyan-600', 'bg-rose-600'];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            
            categories.push({ id, name: name.trim(), color: randomColor });
            localStorage.setItem('matrixCategories', JSON.stringify(categories)); // Kaydet
            renderFilters();
            showToast(`"${name}" eklendi.`);
        }

        // --- UTILS ---
        window.toggleZenMode = function() {
            isZenMode = !isZenMode;
            document.body.classList.toggle('zen-mode', isZenMode);
            const btn = document.getElementById('zenBtn');
            const exitOverlay = document.getElementById('zenExitOverlay');
            
            if (isZenMode) {
                btn.classList.add('bg-red-600', 'text-white', 'border-red-500');
                btn.innerHTML = '<i class="fa-solid fa-eye-slash"></i> <span>Odaktan √áƒ±k</span>';
                exitOverlay.classList.remove('hidden');
                showToast("üßò Odak Modu A√ßƒ±k");
            } else {
                btn.classList.remove('bg-red-600', 'text-white', 'border-red-500');
                btn.innerHTML = '<i class="fa-solid fa-eye"></i> <span>Odak Modu</span>';
                exitOverlay.classList.add('hidden');
            }
        }
        
        window.editTitle = function(qId) {
            // Basitlik i√ßin prompt kullanƒ±yoruz, istenirse input'a √ßevrilebilir
            const current = document.getElementById(`title-${qId}`).innerText;
            const newVal = prompt("B√∂l√ºm ƒ∞smini Deƒüi≈ütir:", current);
            if(newVal) {
                document.getElementById(`title-${qId}`).innerText = newVal;
                // ƒ∞simleri de localStorage'da tutabiliriz
                let titles = JSON.parse(localStorage.getItem('matrixTitles')) || {};
                titles[qId] = newVal;
                localStorage.setItem('matrixTitles', JSON.stringify(titles));
            }
        }
        
        function updateCounts() {
            ['q1', 'q2', 'q3', 'q4'].forEach(q => {
                const count = localTasks.filter(t => (t.matrixQuadrant === q) && (currentFilter === 'all' || t.tag === currentFilter)).length;
                if(q === 'q1') {
                    const wipEl = document.getElementById('wip-badge');
                    wipEl.textContent = `${count}/${WIP_LIMIT}`;
                    wipEl.className = count >= WIP_LIMIT ? "text-xs font-bold bg-red-600 text-white px-2 py-0.5 rounded-full border border-red-400 shadow-lg animate-pulse" : "text-xs font-bold bg-red-900 text-red-200 px-2 py-0.5 rounded-full border border-red-700";
                } else {
                    const badge = document.querySelector(`#q${q.charAt(1)}-container .count-badge`) || document.querySelector(`.quadrant[ondrop="drop(event, '${q}')"] .count-badge`);
                    if(badge) badge.textContent = count;
                }
            });
            
            // Ba≈ülƒ±klarƒ± LocalStorage'dan y√ºkle
            let titles = JSON.parse(localStorage.getItem('matrixTitles')) || {};
            Object.keys(titles).forEach(key => {
                const el = document.getElementById(`title-${key}`);
                if(el) el.textContent = titles[key];
            });
        }

        window.showToast = function(msg) {
            const toast = document.getElementById('toast');
            document.getElementById('toastMsg').textContent = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => toast.classList.add('translate-y-20', 'opacity-0'), 3000);
        }
        
        window.resetData = function() { window.location.reload(); }
        
        // --- GEMINI AI SIMULATION (Ger√ßek API yerine basit anahtar kelime) ---
        window.runGeminiAI = function() {
            const btn = document.getElementById('geminiBtn');
            btn.innerHTML = '<i class="fa-solid fa-spinner fa-spin"></i> ƒ∞≈üleniyor...';
            btn.classList.add('gemini-working');
            
            // Havuzdaki g√∂revleri al
            const backlogTasks = localTasks.filter(t => !t.matrixQuadrant);
            if(backlogTasks.length === 0) {
                 showToast("Havuz bo≈ü.");
                 btn.innerHTML = '<i class="fa-solid fa-wand-magic-sparkles"></i> AI Daƒüƒ±t';
                 btn.classList.remove('gemini-working');
                 return;
            }

            // Basit kural tabanlƒ± daƒüƒ±tƒ±m (Sim√ºlasyon)
            // Ger√ßek entegrasyon i√ßin `index.html`deki callGeminiAPI fonksiyonunu buraya ta≈üƒ±man gerekir.
            setTimeout(() => {
                backlogTasks.forEach(async t => {
                    let target = 'q2'; // Varsayƒ±lan: Planla
                    const txt = t.text.toLowerCase();
                    if(txt.includes('acil') || txt.includes('√∂nemli') || txt.includes('!')) target = 'q1';
                    else if(txt.includes('sil') || txt.includes('bo≈ü') || txt.includes('gereksiz')) target = 'q4';
                    else if(txt.includes('belki') || txt.includes('sonra')) target = 'q3';
                    
                    await updateDoc(doc(db, "artifacts", appId, "users", userId, "todos", t.id), { matrixQuadrant: target });
                });
                btn.innerHTML = '<i class="fa-solid fa-wand-magic-sparkles"></i> AI Daƒüƒ±t';
                btn.classList.remove('gemini-working');
                showToast("G√∂revler otomatik daƒüƒ±tƒ±ldƒ±.");
            }, 1500);
        }

    </script>

    <style>
        body { font-family: 'Inter', sans-serif; transition: background-color 0.3s; }
        .dragging { opacity: 0.5; transform: scale(0.98); }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-thumb { background: #475569; border-radius: 3px; }
        ::-webkit-scrollbar-track { background: transparent; }

        /* ZEN MODE */
        body.zen-mode .non-focus-area { opacity: 0.1; filter: blur(4px); pointer-events: none; transition: all 0.5s ease; }
        body.zen-mode .focus-area { transform: scale(1.02); z-index: 50; box-shadow: 0 0 50px rgba(220, 38, 38, 0.2); border-color: #ef4444; }
        @keyframes pulse-border { 0% { border-color: #3b82f6; } 50% { border-color: #8b5cf6; } 100% { border-color: #3b82f6; } }
        .gemini-working { animation: pulse-border 2s infinite; }
    </style>
</head>
<body class="bg-gray-900 h-screen flex flex-col p-4 text-gray-200 overflow-hidden">

    <div id="authLoading" class="fixed inset-0 flex items-center justify-center bg-gray-900 z-50">
        <div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"></div>
    </div>

    <div id="appContent" class="flex flex-col h-full hidden">
        <header class="flex justify-between items-center mb-4 px-2 shrink-0 non-focus-area transition-opacity duration-300">
            <div class="flex items-center gap-4 overflow-x-auto pb-1 w-full mr-4">
                <div class="flex items-center gap-2">
                    <a href="index.html" class="text-slate-400 hover:text-white transition"><i class="fa-solid fa-arrow-left"></i></a>
                    <h1 class="text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-cyan-300 whitespace-nowrap">
                        Komuta Merkezi
                    </h1>
                </div>
                
                <div id="category-filters" class="flex bg-slate-800 rounded-lg p-1 gap-1 items-center"></div>
            </div>

            <div class="flex items-center gap-3 shrink-0">
                <button onclick="toggleZenMode()" id="zenBtn" class="flex items-center gap-2 px-3 py-1.5 bg-slate-800 hover:bg-slate-700 text-slate-300 rounded-lg border border-slate-700 transition-all text-sm whitespace-nowrap">
                    <i class="fa-solid fa-eye"></i> <span>Odak Modu</span>
                </button>
            </div>
        </header>

        <div class="flex flex-1 gap-4 overflow-hidden relative">
            
            <aside class="w-1/4 bg-slate-800 rounded-xl shadow-lg flex flex-col border border-slate-700 non-focus-area transition-all duration-500">
                <div class="p-4 border-b border-slate-700 flex justify-between items-center">
                    <div>
                        <h2 class="font-semibold text-lg text-slate-200">Havuz</h2>
                        <p class="text-xs text-slate-400">Atanmamƒ±≈ülar</p>
                    </div>
                    <button onclick="runGeminiAI()" id="geminiBtn" class="text-xs bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-500 hover:to-blue-500 text-white px-2 py-1 rounded flex items-center gap-1 shadow-lg transition-all transform hover:scale-105">
                        <i class="fa-solid fa-wand-magic-sparkles"></i> AI Daƒüƒ±t
                    </button>
                </div>
                
                <div class="p-2 border-b border-slate-700 bg-slate-900/50">
                    <input type="text" id="quickTaskInput" placeholder="Hƒ±zlƒ± g√∂rev ekle + Enter" 
                           class="w-full bg-transparent text-sm text-white px-2 py-1 outline-none"
                           onkeypress="handleQuickAdd(event)">
                </div>

                <div id="backlog-list" class="flex-1 overflow-y-auto p-3 space-y-2 bg-slate-900/30" 
                     ondragover="allowDrop(event)" ondrop="drop(event, 'null')"></div>
            </aside>

            <main class="flex-1 grid grid-cols-2 grid-rows-2 gap-4 h-full transition-all duration-500">
                
                <div id="q1-container" class="quadrant focus-area bg-red-900/10 border border-red-900/50 rounded-xl flex flex-col relative transition-all duration-500"
                     ondragover="allowDrop(event)" ondrop="drop(event, 'q1')">
                    <div class="p-3 flex justify-between items-center border-b border-red-900/30 bg-red-900/20 rounded-t-xl">
                        <div class="flex items-center gap-2 flex-1">
                            <span class="text-red-500 animate-pulse">üö®</span>
                            <h3 id="title-q1" class="font-bold text-red-400 cursor-pointer" onclick="editTitle('q1')">Acil & √ñnemli</h3>
                            <span id="wip-badge" class="text-xs font-bold bg-red-900 text-red-200 px-2 py-0.5 rounded-full border border-red-700">0/3</span>
                        </div>
                        <button onclick="addNewTaskDirectly('q1')" class="text-red-400 hover:bg-red-900/50 w-6 h-6 rounded">+</button>
                    </div>
                    <div id="list-q1" class="flex-1 p-2 space-y-2 overflow-y-auto"></div>
                    <div id="zenExitOverlay" class="absolute bottom-4 right-4 hidden">
                         <button onclick="toggleZenMode()" class="bg-slate-800 text-slate-200 px-4 py-2 rounded-full shadow-xl border border-slate-600 text-sm font-bold hover:bg-slate-700">Odaktan √áƒ±k</button>
                    </div>
                </div>

                <div id="q2-container" class="quadrant non-focus-area bg-blue-900/10 border border-blue-900/50 rounded-xl flex flex-col transition-all duration-500"
                     ondragover="allowDrop(event)" ondrop="drop(event, 'q2')">
                    <div class="p-3 flex justify-between items-center border-b border-blue-900/30 bg-blue-900/20 rounded-t-xl">
                        <div class="flex items-center gap-2 flex-1">
                            <span class="text-blue-500">üìÖ</span>
                            <h3 id="title-q2" class="font-bold text-blue-400 cursor-pointer" onclick="editTitle('q2')">Acil Deƒüil & √ñnemli</h3>
                            <span class="text-xs font-bold bg-blue-900 text-blue-200 px-2 py-0.5 rounded-full count-badge">0</span>
                        </div>
                        <button onclick="addNewTaskDirectly('q2')" class="text-blue-400 hover:bg-blue-900/50 w-6 h-6 rounded">+</button>
                    </div>
                    <div id="list-q2" class="flex-1 p-2 space-y-2 overflow-y-auto"></div>
                </div>

                <div id="q3-container" class="quadrant non-focus-area bg-yellow-900/10 border border-yellow-900/50 rounded-xl flex flex-col transition-all duration-500"
                     ondragover="allowDrop(event)" ondrop="drop(event, 'q3')">
                    <div class="p-3 flex justify-between items-center border-b border-yellow-900/30 bg-yellow-900/20 rounded-t-xl">
                        <div class="flex items-center gap-2 flex-1">
                            <span class="text-yellow-500">‚ö°</span>
                            <h3 id="title-q3" class="font-bold text-yellow-400 cursor-pointer" onclick="editTitle('q3')">Acil & √ñnemsiz</h3>
                            <span class="text-xs font-bold bg-yellow-900 text-yellow-200 px-2 py-0.5 rounded-full count-badge">0</span>
                        </div>
                        <button onclick="addNewTaskDirectly('q3')" class="text-yellow-400 hover:bg-yellow-900/50 w-6 h-6 rounded">+</button>
                    </div>
                    <div id="list-q3" class="flex-1 p-2 space-y-2 overflow-y-auto"></div>
                </div>

                <div id="q4-container" class="quadrant non-focus-area bg-gray-800/30 border border-gray-700 rounded-xl flex flex-col transition-all duration-500"
                     ondragover="allowDrop(event)" ondrop="drop(event, 'q4')">
                    <div class="p-3 flex justify-between items-center border-b border-gray-700 bg-gray-800/50 rounded-t-xl">
                        <div class="flex items-center gap-2 flex-1">
                            <span class="text-gray-500">üóëÔ∏è</span>
                            <h3 id="title-q4" class="font-bold text-gray-400 cursor-pointer" onclick="editTitle('q4')">Acil Deƒüil & √ñnemsiz</h3>
                            <span class="text-xs font-bold bg-gray-700 text-gray-300 px-2 py-0.5 rounded-full count-badge">0</span>
                        </div>
                        <button onclick="cleanQ4()" class="text-xs text-red-400 hover:text-red-300 bg-red-900/20 hover:bg-red-900/40 px-2 py-1 rounded transition" title="T√ºm√ºn√º Temizle">
                            <i class="fa-solid fa-trash"></i> Temizle
                        </button>
                    </div>
                    <div id="list-q4" class="flex-1 p-2 space-y-2 overflow-y-auto"></div>
                </div>

            </main>
        </div>
    </div>

    <div id="toast" class="fixed bottom-5 right-5 bg-red-600 text-white px-4 py-3 rounded-lg shadow-2xl transform translate-y-20 opacity-0 transition-all duration-300 z-50 font-semibold flex items-center gap-2">
        <i class="fa-solid fa-circle-exclamation"></i> <span id="toastMsg">Hata</span>
    </div>
</body>
</html>
